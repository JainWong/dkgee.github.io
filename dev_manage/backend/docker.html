<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker笔记 | DKGEE</title>
    <meta name="description" content="业精于勤荒于嬉，行成于思毁于随">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.470bde23.css" as="style"><link rel="preload" href="/assets/js/app.e0011586.js" as="script"><link rel="preload" href="/assets/js/2.0dd1b642.js" as="script"><link rel="preload" href="/assets/js/11.5323a05c.js" as="script"><link rel="prefetch" href="/assets/js/10.1f41f6fe.js"><link rel="prefetch" href="/assets/js/12.c1aeb072.js"><link rel="prefetch" href="/assets/js/13.9592a3b8.js"><link rel="prefetch" href="/assets/js/14.cbba4917.js"><link rel="prefetch" href="/assets/js/15.23085837.js"><link rel="prefetch" href="/assets/js/16.13fc09c7.js"><link rel="prefetch" href="/assets/js/17.b3a9e83f.js"><link rel="prefetch" href="/assets/js/18.21803ca6.js"><link rel="prefetch" href="/assets/js/19.93e47135.js"><link rel="prefetch" href="/assets/js/20.5f526c0e.js"><link rel="prefetch" href="/assets/js/21.51ea0b21.js"><link rel="prefetch" href="/assets/js/22.a00f7858.js"><link rel="prefetch" href="/assets/js/23.d0f2f85e.js"><link rel="prefetch" href="/assets/js/24.aa158e5b.js"><link rel="prefetch" href="/assets/js/25.98e3cadf.js"><link rel="prefetch" href="/assets/js/26.3bf41b7f.js"><link rel="prefetch" href="/assets/js/27.8322deef.js"><link rel="prefetch" href="/assets/js/28.bed45ea2.js"><link rel="prefetch" href="/assets/js/29.79c4159a.js"><link rel="prefetch" href="/assets/js/3.84fe7917.js"><link rel="prefetch" href="/assets/js/30.fc1afe81.js"><link rel="prefetch" href="/assets/js/31.4a30cf20.js"><link rel="prefetch" href="/assets/js/32.cbe21781.js"><link rel="prefetch" href="/assets/js/33.a14e1ccf.js"><link rel="prefetch" href="/assets/js/34.6b6b0b8b.js"><link rel="prefetch" href="/assets/js/35.5517a26f.js"><link rel="prefetch" href="/assets/js/36.d11e774f.js"><link rel="prefetch" href="/assets/js/37.478feea8.js"><link rel="prefetch" href="/assets/js/38.cd5959b6.js"><link rel="prefetch" href="/assets/js/39.bee608c7.js"><link rel="prefetch" href="/assets/js/4.65f6d5e3.js"><link rel="prefetch" href="/assets/js/40.64447231.js"><link rel="prefetch" href="/assets/js/41.da190cfb.js"><link rel="prefetch" href="/assets/js/42.bb7e9d9b.js"><link rel="prefetch" href="/assets/js/43.84b40835.js"><link rel="prefetch" href="/assets/js/44.c6429e23.js"><link rel="prefetch" href="/assets/js/45.8f3e4cdd.js"><link rel="prefetch" href="/assets/js/46.9ca2962e.js"><link rel="prefetch" href="/assets/js/47.f22a68ba.js"><link rel="prefetch" href="/assets/js/48.ed2898d9.js"><link rel="prefetch" href="/assets/js/49.7d4cc8df.js"><link rel="prefetch" href="/assets/js/5.aa3be0df.js"><link rel="prefetch" href="/assets/js/50.aca7937a.js"><link rel="prefetch" href="/assets/js/51.3898b48f.js"><link rel="prefetch" href="/assets/js/52.731aa46f.js"><link rel="prefetch" href="/assets/js/53.adfb5638.js"><link rel="prefetch" href="/assets/js/54.4766fdb1.js"><link rel="prefetch" href="/assets/js/55.d9c476e9.js"><link rel="prefetch" href="/assets/js/56.1badfca1.js"><link rel="prefetch" href="/assets/js/57.2b4a0f5e.js"><link rel="prefetch" href="/assets/js/58.2870bf9e.js"><link rel="prefetch" href="/assets/js/59.19af2621.js"><link rel="prefetch" href="/assets/js/6.7c91c377.js"><link rel="prefetch" href="/assets/js/60.4db3012c.js"><link rel="prefetch" href="/assets/js/61.73110085.js"><link rel="prefetch" href="/assets/js/62.1a543d3f.js"><link rel="prefetch" href="/assets/js/63.7d78b2f2.js"><link rel="prefetch" href="/assets/js/64.6715ed94.js"><link rel="prefetch" href="/assets/js/65.db8ef01a.js"><link rel="prefetch" href="/assets/js/66.d7516247.js"><link rel="prefetch" href="/assets/js/67.038c7e15.js"><link rel="prefetch" href="/assets/js/7.fa23801d.js"><link rel="prefetch" href="/assets/js/8.4e88438e.js"><link rel="prefetch" href="/assets/js/9.8957bdc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.470bde23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DKGEE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev_manage/" class="nav-link router-link-active">
  研发管理
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/improve.html" class="nav-link">
  软工修养
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/soft_arch/" class="nav-link">
  软件架构
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/backend/" class="nav-link router-link-active">
  后端框架
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/frontend/" class="nav-link">
  前端框架
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/anli/" class="nav-link">
  案例分析
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/tip_wall.html" class="nav-link">
  小知识墙
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/linux/command.html" class="nav-link">
  Linux命令
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/renda/" class="nav-link">
  在职研究生
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文学收藏" class="dropdown-title"><span class="title">文学收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/literature/motto.html" class="nav-link">
  励志格言
</a></li><li class="dropdown-item"><!----> <a href="/literature/poetry.html" class="nav-link">
  古诗词
</a></li><li class="dropdown-item"><!----> <a href="/literature/prose.html" class="nav-link">
  散文艺曲
</a></li><li class="dropdown-item"><!----> <a href="/literature/music.html" class="nav-link">
  音乐歌曲
</a></li><li class="dropdown-item"><!----> <a href="/literature/painting.html" class="nav-link">
  画作
</a></li><li class="dropdown-item"><!----> <a href="/literature/book/" class="nav-link">
  阅读书籍
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="规划指南" class="dropdown-title"><span class="title">规划指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  学习指南
</a></li><li class="dropdown-item"><!----> <a href="/guide/gitRepo.html" class="nav-link">
  仓库指南
</a></li><li class="dropdown-item"><!----> <a href="/guide/report/" class="nav-link">
  日常总结
</a></li><li class="dropdown-item"><!----> <a href="/guide/summary_year/" class="nav-link">
  年度规划
</a></li><li class="dropdown-item"><!----> <a href="/guide/upgrade.html" class="nav-link">
  每期升级
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站外链接" class="dropdown-title"><span class="title">站外链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://raw.githack.com/dkgee/skill-map/master/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第三版【网页】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee/tk_arch/wiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第二版【wiki】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee/bigdata-platform-study" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第一版【仓库】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dkgee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/TankRuning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://pptang.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖01
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://pipitang.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖02
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cftx.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖03
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev_manage/" class="nav-link router-link-active">
  研发管理
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/improve.html" class="nav-link">
  软工修养
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/soft_arch/" class="nav-link">
  软件架构
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/backend/" class="nav-link router-link-active">
  后端框架
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/frontend/" class="nav-link">
  前端框架
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/anli/" class="nav-link">
  案例分析
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/tip_wall.html" class="nav-link">
  小知识墙
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/linux/command.html" class="nav-link">
  Linux命令
</a></li><li class="dropdown-item"><!----> <a href="/dev_manage/renda/" class="nav-link">
  在职研究生
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文学收藏" class="dropdown-title"><span class="title">文学收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/literature/motto.html" class="nav-link">
  励志格言
</a></li><li class="dropdown-item"><!----> <a href="/literature/poetry.html" class="nav-link">
  古诗词
</a></li><li class="dropdown-item"><!----> <a href="/literature/prose.html" class="nav-link">
  散文艺曲
</a></li><li class="dropdown-item"><!----> <a href="/literature/music.html" class="nav-link">
  音乐歌曲
</a></li><li class="dropdown-item"><!----> <a href="/literature/painting.html" class="nav-link">
  画作
</a></li><li class="dropdown-item"><!----> <a href="/literature/book/" class="nav-link">
  阅读书籍
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="规划指南" class="dropdown-title"><span class="title">规划指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  学习指南
</a></li><li class="dropdown-item"><!----> <a href="/guide/gitRepo.html" class="nav-link">
  仓库指南
</a></li><li class="dropdown-item"><!----> <a href="/guide/report/" class="nav-link">
  日常总结
</a></li><li class="dropdown-item"><!----> <a href="/guide/summary_year/" class="nav-link">
  年度规划
</a></li><li class="dropdown-item"><!----> <a href="/guide/upgrade.html" class="nav-link">
  每期升级
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站外链接" class="dropdown-title"><span class="title">站外链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://raw.githack.com/dkgee/skill-map/master/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第三版【网页】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee/tk_arch/wiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第二版【wiki】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee/bigdata-platform-study" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知识整理第一版【仓库】
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dkgee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dkgee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/TankRuning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://pptang.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖01
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://pipitang.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖02
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cftx.xyz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  皮皮糖03
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>软件开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev_manage/" class="sidebar-link">研发管理</a></li><li><a href="/dev_manage/improve.html" class="sidebar-link">软工修养</a></li><li><a href="/dev_manage/soft_arch/" class="sidebar-link">软件架构</a></li><li><a href="/dev_manage/backend/" class="sidebar-link">后端框架</a></li><li><a href="/dev_manage/frontend/" class="sidebar-link">前端框架</a></li><li><a href="/dev_manage/anli/" class="sidebar-link">案例分析</a></li><li><a href="/dev_manage/tip_wall.html" class="sidebar-link">小知识墙</a></li><li><a href="/dev_manage/linux/command.html" class="sidebar-link">Linux命令</a></li><li><a href="/dev_manage/renda/" class="sidebar-link">在职研究生</a></li><li><a href="/renda/" class="sidebar-link">信管国考题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="docker笔记"><a href="#docker笔记" class="header-anchor">#</a> Docker笔记</h2> <h3 id="docker安装"><a href="#docker安装" class="header-anchor">#</a> Docker安装</h3> <ol><li><a href="https://blog.csdn.net/bbwangj/article/details/81088231" target="_blank" rel="noopener noreferrer">Alpine系统<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>脚本安装Docker： curl https://get.docker.com | bash</li> <li><a href="https://blog.csdn.net/h363659487/article/details/77159306" target="_blank" rel="noopener noreferrer">CentOS 环境Docker离线安装方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/" target="_blank" rel="noopener noreferrer">Docker文件下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p>在线安装：</p> <div class="language- extra-class"><pre><code># 安装依赖包
yum -y install yum-utils device-mapper-persistent-data lvm2

# 安装Docker
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 	# 配置安装源 			
yum list docker-ce.x86_64 --showduplicates | sort -r  	# 查看docker版本，选择对应的安装包
yum makecache fast &amp;&amp; yum -y install docker-ce-18.09.3	

# 启动并验证Docker是否安装成功
systemctl daemon-reload &amp;&amp; systemctl start docker	# 启动docker
systemctl enable docker.service		# 设置开机启动
docker version           # 查看docker版本信息
</code></pre></div><p>RPM参考命令：</p> <div class="language- extra-class"><pre><code>rpm -qa docker*  # 查找当前系统安装以docker开头的rpm包
rpm -e docker-ce-17.03.2.ce-1.el7.centos.x86_64 # 卸载这个rpm安装包
rpm -e --nodeps docker*   # 卸载这个rpm安装包（不卸载依赖的包）
rpm -ivh docker/* --nodeps --force	# 安装docker目录下的rpm包
</code></pre></div><p>快速卸载Docker中镜像：</p> <div class="language- extra-class"><pre><code>docker stop $(docker ps -a -q)	# 先停止镜像生成的容器，会返回容器id
docker rm $(docker ps -a -q)	# 再删除镜像生成的容器，会返回容器id
docker rmi 446380f4e90c		# 再删除镜像 
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Docker常见命令</p> <div class="language- extra-class"><pre><code>systemctl start|stop|status|restart|enable|daemon-reload docker  # 启动|停止|查看状态|重启|开机自启|重新载入
docker info  # 查看docker概要信息
docker stats # 显示统计的docker的CPU、内存、网络、IO情况
docker build -t runoob/ubuntu:v1 . 	# 使用Dockerfile编译创建一个镜像 t: tag 
docker login docker.io	# 登录hub.docker.com 授权位置文件：  /root/.docker/config.json
# 推送镜像
docker tag mych:0.0.1 dkgee/mych:0.0.1  # 给镜像重新打标签，先标记
docker push dkgee/mych:0.0.1 			# 再推送
docker --help  # 查看docker帮助信息【比较有用】
docker -v  		# 查看docker版本
docker run -v	# Docker容器启动的时候，如果要挂载宿主机的一个目录，可以用-v参数指定。
如我要启动一个centos容器，宿主机的/test目录挂载到容器的/soft目录，可通过以下方式指定：
docker run -it -v /test:/soft centos /bin/bash
docker save -o ./ubuntu18.tar ubuntu:18.04 	# 导出docker镜像ubuntu:18.04到当前目录的ubuntu18.tar中
docker load --input ./ubuntu18.tar	# 从当前路径下ubuntu18.tar加载镜像
docker export &lt;容器名&gt; &gt; &lt;保存路径&gt;  # 导出容器，例如docker export ubuntu18 &gt; ./ubuntu18.tar
docker import &lt;文件路径&gt;  &lt;容器名&gt;  # 导入容器，docker import ./ubuntu18.tar ubuntu18
docker attach &lt;容器名&gt; # 进入容器，该命令通常用于进入后台已经在运行的容器
docker exec -it &lt;容器名&gt; &lt;执行指令&gt;  # 进入容器，同一个容器有不同的界面，进入容器后的界面不会受该容器的其他运行者的影响，建议使用该命令
docker exec -it ubuntu18 /bin/bash
docker exec -it --user root &lt;container id&gt; /bin/bash	# 切换到root用户登录
docker network ls	# 查看容器网络（容器间通信），默认bridge模式	https://www.cnblogs.com/zuxing/articles/8780661.html  
docker search wordpress	# 搜索镜像
docker inspect &lt;image name&gt; 	# 检查容器，会将容器的配置详情打印出来  docker inspect data|grep /var/lib/docker/volum
docker ps  		# 查看docker容器
docker stop $(docker ps -a -q)  # 停止所有容器
docker start &lt;image name&gt;  		# 启动容器
docker rm $(docker ps -a -q)	# 删除所有容器
docker images 	# 查看docker内镜像
docker logs  CONTAINER_ID # 查看容器日志， 参考https://www.cnblogs.com/gylhaut/p/9317843.html
docker rmi 	&lt;image id&gt;	# 通过image的id来指定删除镜像
docker run -d xxx	# 后台运行某个容器  -d:后台模式 -P:创建容器(容器内部端口随机映射到主机端口) -p:指定端口(容器内部端口指定映射到主机端口)
例如：docker run -d -P training/webapp python app.py	# 后台运行training目录下的webapp容器，并执行python app.py命令
docker run -d -p 5000:5000 training/webapp python app.py  
# 后台运行training目录下的webapp容器，容器内5000端口映射到主机5000端口，并执行python app.py命令
docker run -d -p 127.0.0.1:5001:5000 training/webapp python app.py
# 我们可以指定容器绑定的网络地址，比如绑定 127.0.0.1。【注意，此处可以映射到我们的服务器地址】
# docker run -d -p 10.3.211.247:19090:19090 training/webapp python app.py   就可以通过访问10.3.211.247:19090来访问容器的 5000 端口。
docker run -d -p 127.0.0.1:5000:5000/udp training/webapp python app.py
# 指定端口使用udp协议，默认为tcp协议
docker port adoring_stonebraker 5000
# 查看容器端口绑定情况
docker run -d -P --name runoob training/webapp python app.py
# 当我们创建一个容器的时候，docker 会自动对它进行命名。另外，我们也可以使用 --name 标识来命名容器
docker ps -l
# 查看容器名称。
</code></pre></div></div> <p><a href="https://www.runoob.com/docker/docker-command-manual.html" target="_blank" rel="noopener noreferrer">菜鸟教程之Docker命令大全<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/kongxx/article/details/38676917" target="_blank" rel="noopener noreferrer">Docker容器之间端口映射<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/u010900754/article/details/78526443" target="_blank" rel="noopener noreferrer">Dockerfile中CMD、ENTRYPOINT命令区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>通过docker来编译Dockerfile构建镜像: docker build -t app_dir ./Dockerfile</p> <p><a href="https://bbs.zhengfunyuan.com/read-44-1.html" target="_blank" rel="noopener noreferrer">Docker环境探测<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="docker镜像组件"><a href="#docker镜像组件" class="header-anchor">#</a> Docker镜像组件</h3> <div class="custom-block tip"><p class="custom-block-title">Redis</p> <div class="language- extra-class"><pre><code>## 单节点
docker pull redis:3.2
docker run -p 6379:6379 --name myredis -v $PWD/data:/data  -d redis:3.2 redis-server --appendonly yes
docker exec -it myredis redis-cli
## 集群模式
docker pull tommy351/redis-cluster
docker run --name myredisc -v $PWD/data:/data -p 7000:7000 -p 7001:7001 -p 7002:7002 -p 7003:7003 -p 7004:7004 -p 7005:7005 -d tommy351/redis-cluster
docker exec -it myredis /bin/sh
docker exec -it myredisc redis-cli -h 49.233.170.108 -p 7000 -c
# 解决公网访问出现 redis TTL exhausted.异常信息问题，使用CLUSTER_ANNOUNCE_IP发布。
docker run --name myredisc -v $PWD/data:/data -p 7000:7000 -p 7001:7001 -p 7002:7002 -p 7003:7003 -p 7004:7004 -p 7005:7005 \
-e CLUSTER_ANNOUNCE_IP=127.0.0.1 -d tommy351/redis-cluster	
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Mysql</p> <div class="language- extra-class"><pre><code>docker pull mysql:5.6
docker pull kiratalent/mysql:5.7
docker run -p 3306:3306 --name mymysql -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/var/log/mysql -v $PWD/data:/var/lib/mysql \
-e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.6
docker exec -it mymysql mysql -uroot -p123456
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Zookeeper</p> <div class="language- extra-class"><pre><code>docker pull jplock/zookeeper
docker run --name myzk -p 2181:2181 -d jplock/zookeeper
docker run --name myzk -p 2181:2181 --network host -d jplock/zookeeper 【使用主机网络】
docker exec -it myzk /bin/bash
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Kafka</p> <p><a href="https://www.cnblogs.com/once/p/10146666.html" target="_blank" rel="noopener noreferrer">集群模式搭建参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre><code>docker pull wurstmeister/kafka			
docker run -d --name mykafka --publish 9092:9092 --link myzk --env KAFKA_ZOOKEEPER_CONNECT=myzk:2181 --env KAFKA_ADVERTISED_HOST_NAME=localhost --env \
KAFKA_ADVERTISED_PORT=9092 --volume /etc/localtime:/etc/localtime wurstmeister/kafka:latest

docker exec -it kafka /bin/bash
bin/kafka-topics.sh --create --zookeeper myzk:2181 --replication-factor 1 --partitions 1 --topic mykafka3
bin/kafka-console-producer.sh --broker-list localhost:9092 --topic mykafka3
bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic mykafka3 --from-beginning 【注意kakfa低版本问题】

bin/kafka-topics.sh --create --zookeeper myzk:2181 --replication-factor 1 --partitions 1 --topic TopicDeviceLog
bin/kafka-topics.sh --create --zookeeper myzk:2181 --replication-factor 1 --partitions 1 --topic TopicIpAccessLog

docker exec -it mykafka /opt/kafka_2.12-2.3.0/bin/kafka-topics.sh --create --zookeeper myzk:2181 --replication-factor 1 --partitions 1 --topic TopicDeviceLog
docker exec -it mykafka /opt/kafka_2.12-2.3.0/bin/kafka-topics.sh --create --zookeeper myzk:2181 --replication-factor 1 --partitions 1 --topic TopicIpAccessLog

docker exec -it ciot_mykafka_1 /opt/kafka_2.12-2.3.0/bin/kafka-topics.sh --create --zookeeper 172.30.154.245:2181 --replication-factor 1 --partitions 1 --topic TopicDeviceLog

#启动Docker中kafka生产者和消费端（注意kafka中版本号，可能会因为镜像更新而变化）
docker exec -it mykafka /opt/kafka_2.12-2.4.0/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic TopicMessageLog
docker exec -it mykafka /opt/kafka_2.12-2.4.0/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic TopicMessageLog --from-beginning 

#使用云服务器部署Kafka节点，KAFKA_ADVERTISED_HOST_NAME为内网IP、KAFKA_ADVERTISED_LISTENERS为外网IP
docker run -d --name mykafka --publish 9092:9092 --link myzk --env KAFKA_ZOOKEEPER_CONNECT=myzk:2181 --env KAFKA_ADVERTISED_HOST_NAME=172.17.0.10 --env \
KAFKA_ADVERTISED_PORT=9092 --env KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://122.51.101.124:9092 --volume /etc/localtime:/etc/localtime wurstmeister/kafka:latest
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Clickhouse&amp;Tabix</p> <div class="language- extra-class"><pre><code>docker pull yandex/clickhouse-server
docker pull yandex/clickhouse-client

## 只挂载存储
docker run -d --name mych --ulimit nofile=262144:262144 -p 8123:8123 --volume=$PWD/database:/var/lib/clickhouse yandex/clickhouse-server

## 挂载配置和存储
docker run -d --name mych --ulimit nofile=262144:262144 -v $PWD/database:/var/lib/clickhouse \
-v $PWD/config/config.xml:/etc/clickhouse-server/config.xml yandex/clickhouse-server

## 客户端
docker run -it --rm --link mych:clickhouse-server yandex/clickhouse-client --host clickhouse-server 
docker run -it --rm yandex/clickhouse-client --host 10.92.8.210

## Tabix(clickhouse 查询操作界面)
docker pull spoonest/clickhouse-tabix-web-client
docker run -d -p 8080:80 spoonest/clickhouse-tabix-web-client
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">ELK</p> <div class="language- extra-class"><pre><code>## Elasticsearch
docker pull elasticsearch:6.7.0
docker run --name elasticsearch -d -p 9200:9200 -p 9300:9300 elasticsearch:6.7.0

docker run -d -p 9202:9200 -p 9302:9300 --link es1\
--name es2 -e cluster.name=meitu -e ES_JAVA_OPTS=&quot;-Xms512m -Xmx512m&quot; -e xpack.security.enabled=false\
-e discovery.zen.ping.unicast.hosts=es1 docker.elastic.co/elasticsearch/elasticsearch:5.6.3

docker run --rm -v /opt/elk/es/data:/usr/share/elasticsearch/data elasticsearch:6.7.0 /bin/bash -c 'ls -al /usr/share/elasticsearch/'

集群搭建参考地址: https://blog.csdn.net/belonghuang157405/article/details/83301937
1. 本地映射data目录权限需要修改	
	chmod 775  /opt/elk/es/data &amp;&amp; echo &quot;vm.max_map_count=655360&quot; &gt;&gt; /etc/sysctl.conf		
2. 启动docker-compose参考
version: '2'
	services:
		es:
		image: elasticsearch:6.7.0
		ports:
			- &quot;9200:9200&quot;
			- &quot;9300:9300&quot;
		environment:
			- xpack.security.enabled=false
		volumes:
			- /opt/elk/es/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml
			- /opt/elk/es/data:/usr/share/elasticsearch/data
			- /opt/elk/es/plugins:/usr/share/elasticsearch/plugins
		network_mode: &quot;bridge&quot;
3. 注意报错： Caused by: java.nio.file.AccessDeniedException: /usr/share/elasticsearch/data/nodes
	chmod 775 /opt/elk/es/data

## Logstash
docker pull logstash:6.5.2			
docker run -d -p 9600:9600 -it -v $PWD/config/:/usr/share/logstash/config/  logstash:6.5.2		
【装插件】
docker run -it --rm logstash:6.5.2  logstash-plugin install  logstash-input-jdbc  
【本地目录安装】
docker run -it --rm -v $PWD/plugin/:/opt/plugin/ logstash:6.5.2 logstash-plugin install file:///opt/plugin/logstash-filter-prune-6.5.2.zip
docker run -it --rm logstash:5.6.10 -f /dir/config.conf -v /config/dir:/dir	
如果需要安装多个插件需要使用Dockerfile重新创建镜像，例如
FROM logstash:6.5.2
ADD plugin /opt/plugin
RUN logstash-plugin install file:///opt/plugin/logstash-filter-mutate-6.5.2.zip
RUN logstash-plugin install file:///opt/plugin/logstash-filter-prune-6.5.2.zip
RUN logstash-plugin install file:///opt/plugin/logstash-input-kafka-6.5.2.zip
RUN logstash-plugin install file:///opt/plugin/logstash-output-clickhouse-6.5.2.zip

## Kibana
docker pull kibana:6.7.0
docker run -d --name kibana -e ELASTICSEARCH_HOSTS=http://172.30.154.241:9200,http://172.30.154.244:9200,http://172.30.154.245:9200 -p 5601:5601 kibana:6.7.0
docker run -d --name kibana -e ELASTICSEARCH_HOSTS=http://172.30.154.241:9200 -p 5601:5601 kibana:6.7.0
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">Jenkins（建议使用rpm安装在物理机上，不要使用Docker镜像）</p> <div class="language- extra-class"><pre><code>docker pull jenkins/jenkins:lts  #使用这个版本
docker run --name myjk -p 8080:8080 -p 50000:50000 -d jenkins/jenkins:lts

jenkins镜像需要自己制作	50000为agent代理控制端口	jdk环境配置	maven环境配置
docker run -d -p 8080:8080 -p 50000:50000 -v /home/jenkins:/var/jenkins_home -v /usr/local/maven3:/usr/local/maven3 \ 
-v /usr/java/jdk1.8.0_201:/usr/java/jdk1.8.0_201 -v /usr/bin/mvn/:/usr/bin/mvn/ --name=jenkinsnew6 jenkinsnew
# 需要把自带的jdk、maven安装路径映射进docker容器中
在jenkins shell中执行没有加载/etc/profile .bash_profile中的环境变量	
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Nexus3</p> <div class="language- extra-class"><pre><code>docker pull sonatype/nexus3
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">Nginx</p> <div class="language- extra-class"><pre><code># 参考: https://blog.csdn.net/sunt2018/article/details/85001485
docker pull nginx
# 创建挂载目录
mkdir -p /data/nginx/{conf,conf.d,html,logs}	
# 在 conf 中 编写 nginx.conf 配置文件	
docker run --name mynginx -p 80:80  \
-v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf  \
-v /data/nginx/logs:/var/log/nginx  \
-v /data/nginx/html:/usr/share/nginx/html \
-d nginx:latest
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">制作镜像并传播示例</p> <div class="language- extra-class"><pre><code>## 提交自制镜像
docker commit -a &quot;dkgee&quot; -m &quot;ciot&quot; 7ec361637ebb mych:1.0.0
## 导出镜像到本地
docker save mych:0.0.1 -o /opt/docker/clickhouse/mych.tar
tar -zcvf clickhouse.tar.gz clickhouse
# 将clickhouse.tar.gz复制到其他机器
tar -zxvf clickhouse.tar.gz
## 导入镜像
docker load --input ./mych.tar
docker run -d --name mych --ulimit nofile=262144:262144 -p 8123:8123 --volume=$PWD/database:/var/lib/clickhouse mych:0.0.1
docker load --input ./mych-client.tar
docker run -it --rm --link mych:clickhouse-server yandex/clickhouse-client --host clickhouse-server 
</code></pre></div></div> <h3 id="app部署到docker"><a href="#app部署到docker" class="header-anchor">#</a> App部署到Docker</h3> <ol><li><a href="https://blog.csdn.net/anxpp/article/details/73478883" target="_blank" rel="noopener noreferrer">spring boot应用发布到docker(完整版)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/bljbljbljbljblj/article/details/83791961" target="_blank" rel="noopener noreferrer">springboot2.x+docker部署<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/alinyua/article/details/81094240" target="_blank" rel="noopener noreferrer">Maven中最强大的Docker插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>MVN编译路径：mvn clean install -DskipTests docker:build</li></ol> <p>配置 Docker远程访问API:</p> <blockquote><p>docker-maven-plugin 插件是使用的 Docker Remote API 进行远程提交镜像的，docker 默认并没有开启该选项，直接修改 docker 服务配置即可，
Centos 7 配置文件位于:/usr/lib/systemd/system/docker.service
直接在 ExecStart 启动参数的 /usr/bin/dockerd 后面添加以开启 TCP 连接：-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock
ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock
Docker 会根据 Dockerfile 生成镜像时自动下载需要的依赖
IDEA有Docker插件可用</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e0011586.js" defer></script><script src="/assets/js/2.0dd1b642.js" defer></script><script src="/assets/js/11.5323a05c.js" defer></script>
  </body>
</html>
